require({cache:{"sys/introduce/mobile/js/IntroduceItemListMixin":function(){define(["dojo/_base/declare","mui/list/_TemplateItemListMixin",dojoConfig.baseUrl+"sys/introduce/mobile/js/IntroduceItemMixin.js"],function(a,b,c){return a("sys.introduce.IntroduceItemListMixin",[b],{itemRenderer:c})})},"sys/introduce/mobile/js/checkBoxEssence":function(){define(["dojo/_base/declare","dijit/_WidgetBase","mui/form/CheckBox","dojo/dom-construct","dojo/topic"],function(d,e,c,a,b){return d("sys.introduce.checkBoxEssence",[c],{buildRendering:function(){this.inherited(arguments);this.buildHidden()},buildHidden:function(){this.hiddenDom=a.create("input",{type:"hidden",value:"0",name:"fdIntroduceToEssence"},this.domNode)},_onClick:function(f){this.inherited(arguments);if(this.checked){this.hiddenDom.value="1"}else{this.hiddenDom.value="0"}b.publish("/mui/introduce/validate")}})})},"sys/introduce/mobile/js/IntroduceItemMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/dom-style","dojo/dom-attr","dojox/mobile/_ItemBase","mui/util","mui/rating/Rating","mui/i18n/_i18n!sys/introduce/mobile/js/mui-intr"],function(c,b,g,e,f,h,d,i,a){var j=c("sys.introduce.IntroduceItemMixin",[h],{tag:"li",summary:"",created:"",score:0,label:"",icon:"",tabIndex:"",introduceGoalNames:"",introduceType:"",buildRendering:function(){this._templated=!!this.templateString;if(!this._templated){this.domNode=this.containerNode=this.srcNodeRef||b.create(this.tag,{className:"muiIntroduceItem"})}this.inherited(arguments);if(!this._templated){this.buildInternalRender()}},buildInternalRender:function(){if(this.icon){var l=b.create("div",{className:"muiIntroduceIcon"},this.containerNode);this.imgNode=b.create("div",{className:"muiIntroduceImg"},l);e.set(this.imgNode,{"background-image":"url("+this.icon+")","background-size":"cover"})}if(this.label){b.create("span",{className:"muiIntroduceLabel muiAuthor",innerHTML:this.label},this.domNode)}b.create("div",{className:"muiIntroduceRound"},this.domNode);this.contentNode=b.create("div",{className:"muiIntroduceContent"},this.domNode,"last");this.infoNode=b.create("div",{className:"muiIntroduceInfo"},this.contentNode);if(this.summary){this.summaryNode=b.create("p",{className:"muiIntroduceSummary",innerHTML:this.summary},this.infoNode)}var k=b.create("span",{className:"muiIntroduceScore"},this.infoNode);var m=new i({numStars:3,value:3-parseInt(this.score,10),icon:"mui mui-2 mui-praise",baseClass:"muiIntroduceScoreArea"});k.appendChild(m.domNode);if(this.created){this.createdNode=b.create("div",{className:"muiIntroduceCreated",innerHTML:'<i class="mui mui-time"></i>'+this.created},this.infoNode)}this.targetNode=b.create("div",{className:"muiIntroduceTarget",innerHTML:'<span class="muiIntroduceTargetTitle">'+a["sysIntroduceMain.mobile.introduce"]+":</span>"},this.contentNode,"last");if(this.introduceType){this.introduceTypeNode=b.create("span",{className:"muiIntroduceTargetType",innerHTML:this.introduceType},this.targetNode,"last")}if(this.introduceGoalNames){this.introduceGoalNamesNode=b.create("span",{className:"muiIntroduceTargetName",innerHTML:this.introduceType?"ï¼Œ"+this.introduceGoalNames:this.introduceGoalNames},this.targetNode,"last")}},startup:function(){if(this._started){return}this.inherited(arguments)},_setLabelAttr:function(k){if(k){this._set("label",k)}}});return j})},"sys/introduce/mobile/js/IntroduceViewContent":function(){define(["dojo/_base/declare","dijit/_WidgetBase","mui/i18n/_i18n!sys/introduce/mobile/js/mui-intr","dojo/dom-construct","mui/device/adapter"],function(c,e,d,b,a){return c("sys.introduce.IntroduceViewContent",[e],{url:null,docSubject:null,fdIntroduceReason:null,buildRendering:function(){this.inherited(arguments);this.buildTitle();this.buildContent()},buildTitle:function(){var f=b.create("div",{className:"muiIntroduceTitle"},this.domNode);b.create("div",{className:"muiIntroduceTitleLeft",innerHTML:d["sysIntroduceMain.mobile.title"]+":"},f);var g=b.create("div",{className:"muiIntroduceTitleRight",innerHTML:this.docSubject},f);this.connect(g,"click","open")},open:function(){if(this.url){a.open(this.url,"_self")}},buildContent:function(){var f=b.create("div",{className:"muiIntroduceContent"},this.domNode);b.create("div",{className:"muiIntroduceContentTitle",innerHTML:d["sysIntroduceMain.mobile.reason"]+":"},f);b.create("div",{className:"muiIntroduceContentMsg",innerHTML:this.fdIntroduceReason},f)}})})},"sys/introduce/mobile/js/Intr":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/dom-style","dojo/dom-attr","dijit/_WidgetBase","mui/util","mui/dialog/Tip","dojo/html","dojo/text!./intr.jsp","dojo/query","dojo/_base/lang","dojo/dom","dojo/_base/array","dojo/request","dojo/topic","dijit/registry","dojo/window","mui/form/validate/Reminder","mui/i18n/_i18n!sys/introduce/mobile/js/mui-intr"],function(s,f,k,o,r,j,a,m,l,i,e,t,q,g,b,p,h,c,d,n){return s("sys.introduce.Intr",[j],{mask:null,limitNum:1000,value:3,lock:false,submitEnableClass:"muiIntrSubmitEnable",fdModelId:"",fdModelName:"",tips:{intr_tip_1:n["sysIntroduceMain.mobile.worthLooking"],intr_tip_2:n["sysIntroduceMain.mobile.keyInstroduce"],intr_tip_3:n["sysIntroduceMain.mobile.forceInstroduce"]},buildRendering:function(){this.domNode=this.containerNode;this.inherited(arguments);this.subscribe("/mui/introduce/validate",this.validate)},startup:function(){this.inherited(arguments);this.connect(this.domNode,"onclick","intrClick");p.publish("/sys/introduce/loaded",[this])},intrClick:function(u){this.defer(this.showMask,350)},bindInput:function(){var u=this.inputNode[0];this.connect(u,"onfocus","doFocus");this.connect(u,"onblur","doBlur");this.connect(u,"onkeyup","doKeyup");this.connect(u,"oninput","doInput")},bindSubmit:function(){this.submitHandle=this.connect(this.submitNode[0],"onclick","doSubmit")},bindHideMask:function(){this.hideMaskNode.on("click",t.hitch(this,this.hideMask))},buildMask:function(){if(this.container){this._showMask();return}var u=new l._ContentSetter({parseContent:true,onBegin:function(){this.content=this.content.replace("!{starklass}","mui/rating/Rating");this.inherited("onBegin",arguments)}});this.container=f.create("div",{className:"muiIntrMask"},document.body,"last");u.node=this.container;u.set(i);u.tearDown();var v=this;setTimeout(function(){v.ulContainer=e("ul",v.container);v._showMask()},1);this.submitNode=e(".muiIntrSubmit",this.container);this.bindSubmit();this.inputNode=e(".muiIntrMaskText",this.container);this.bindInput();this.setInputValue(this.value);this.hideMaskNode=e(".muiIntrHideMask",this.container);this.connect(this.container,"onclick",this.hideNode);this.bindHideMask();this.subscribe("/mui/rating/ratingSelected",t.hitch(this,this.scoreSelected));this.subscribe("/mui/Category/valueChange",t.hitch(this,this.addressChange))},hideNode:function(u){if("muiIntrMask"==u.target.className){this.hideMask()}},setInputValue:function(v){var u=this.tips["intr_tip_"+v];this.inputNode[0].value=u;this.validate()},addressChange:function(u){var v=e('input[name="fdIntroduceToPerson"]');if(u.curIds==""&&u.curNames==""){v[0].value="0"}else{v[0].value="1"}this.validate()},scoreSelected:function(u){if(u!=null){var x=u.value;e('[name="fdIntroduceGrade"]')[0].value=3-parseInt(x);var v=this.inputNode[0].value.trim(),w=this.isDefualt(v);if(v&&!w){return}this.setInputValue(x)}},isDefualt:function(w){var v=false;for(var u in this.tips){if(w==this.tips[u]){v=true;break}}return v},_showMask:function(){o.set(this.container,{display:"block",opacity:1});this.defer(function(){o.set(this.domNode,{display:"none"});this.ulContainer.style({"-webkit-transform":"translate3d(0px, 0px, 0px)",opacity:1})},200)},_hideMask:function(u){this.set("lock",false);this.ulContainer.style({"-webkit-transform":"translate3d(0px, 400%, 0px)",opacity:0});this.defer(function(){o.set(this.container,{opacity:0});o.set(this.domNode,{display:"block"});if(!u){this.setInputValue(this.value);this.resetForm();h.byId("intr_praise_opt").set("value",this.value)}},500);this.defer(function(){o.set(this.container,{display:"none"})},700)},resetForm:function(){e('input[name="fdIntroduceGoalNames"]',this.container)[0].value="";e('input[name="fdIntroduceGoalIds"]',this.container)[0].value="";e('input[name="fdIntroduceGrade"]',this.container)[0].value=3-parseInt(this.value)},destroyMask:function(u){if(!this.ulContainer){return}this._hideMask(u)},showMask:function(){if(this.lock==true){return}this.set("lock",true);this.defer(function(){this.buildMask()},350)},hideMask:function(u){this.defer(function(){this.destroyMask(u);this.set("lock",false)},350)},doFocus:function(){if(this.isDefualt(this.inputNode[0].value.trim())){this.inputNode[0].value=""}this.validate()},doBlur:function(){this.validate()},doKeyup:function(){this.validate()},doInput:function(){this.validate()},validate:function(){if(this._validate()){this.submitNode.addClass(this.submitEnableClass)}else{this.submitNode.removeClass(this.submitEnableClass)}},hideInput:["fdIntroduceToPerson","fdIntroduceToEssence","fdIntroduceGoalNames","fdIntroduceGoalIds","fdIntroduceGrade"],doSubmit:function(u){if(!this._validate()){return}var w={};var v=this;g.forEach(e("#intr_formData input"),function(x){w[r.get(x,"name")]=x.value});w.fdIntroduceReason=this.inputNode[0].value;g.forEach(this.hideInput,function(x){w[x]=e('input[name="'+x+'"]',this.container)[0].value});b.post(a.formatUrl("/sys/introduce/sys_introduce_main/sysIntroduceMain.do?method=introcheck&isMobile=1"),{data:w,timeout:30000}).response.then(function(x){if(x.data!="error"){var y=b.post(a.formatUrl("/sys/introduce/sys_introduce_main/sysIntroduceMain.do?method=save"),{data:w,timeout:30000}).response.then(function(z){if(z.status==200&&z.getHeader("lui-status")=="true"){m.success({text:n["sysIntroduceMain.mobile.introduce.suc"]});v.defer(function(){p.publish("/mui/list/onPull",h.byId("intr_scollView"));p.publish("/mui/category/clear",{key:"fdIntroduceGoalIds"})},300);v._hideMask()}else{m.fail({text:n["sysIntroduceMain.mobile.introduce.err"]})}});this.hideMask()}else{m.fail({text:n["sysIntroduceMain.mobile.introcheckfalse"]})}})},_validate:function(){var v=this.constructor.prototype;var u=true;for(name in v){if(/^_validate[A-Z](.*)$/.test(name)){u=v[name].call(this);if(!u){return false}}}return u},_validateInput:function(){var v=false;var y=this.inputNode[0].value.trim();var x=y.length;var u=0;for(var w=0;w<x;w++){if(y[w].charCodeAt(0)<299){u++}else{u+=2}}if(u<=2*this.limitNum&&u>0){v=true}if(v){e("#contentLength",this.container)[0].innerHTML=""}else{if(u>0){e("#contentLength",this.container)[0].innerHTML=Math.ceil((this.limitNum*2-u)/2)}}return v},reminder:null,_validateEssence:function(){this.EssenceDom=e(".fdIntroduceToEssenceClass");if(this.EssenceDom&&this.EssenceDom.length>0){if(this.EssenceDom[0].checked){return true}else{return this._validateAddress()}}return false},_validateAddress:function(){if(this.EssenceDom&&this.EssenceDom.length>0&&this.EssenceDom[0].checked){return true}var w=e('[name="fdIntroduceGoalIds"]')[0].value.trim();var u=this;if(w){var v=true;b.post(a.formatUrl("/sys/introduce/sys_introduce_main/sysIntroduceMain.do?method=intrGoalCheck"),{data:{fdIntroduce:w,fdModelName:u.fdModelName,fdModelId:u.fdModelId},sync:true,handleAs:"json"}).then(function(x){if(x.isExist){v=false;u.showMsg()}else{u.hideMsg()}});return v}else{u.hideMsg();return false}},showMsg:function(){if(!this.reminder){this.reminder=new d(document.getElementById("_intr_address"),n["sysIntroduceMain.mobile.introduce.err.same"])}this.reminder.show()},hideMsg:function(){if(!this.reminder){return}this.reminder.hide()}})})}}});