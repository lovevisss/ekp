require({cache:{"sys/notify/mobile/resource/js/list/CardItemMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/on","mui/dialog/Tip","mui/util","dojo/_base/lang","mui/device/adapter","mui/device/device","dojo/request","dojo/topic","dojox/mobile/_ItemBase","dojox/mobile/viewRegistry","mui/i18n/_i18n!sys/notify/mobile/resource/js/mui-sys-notify"],function(e,c,k,h,m,g,b,l,a,d,f,j,i,o){var n=e("sys.notify.list.item.CardItemMixin",[j],{buildRendering:function(){this.inherited(arguments);this.domNode=c.create("li",{className:"muiNotifyCardItem"},this.containerNode);this.buildNotifyContentRender();this.buildNotifyOperateBtnRender()},buildNotifyContentRender:function(){var r=c.create("div",{className:"muiNotifyContentContainer"},this.domNode);if(this.href){this._bindGoToDetailPageClick(r)}else{k.add(this.domNode,"muiNotifyCardItemLock");this.makeLockLinkTip(r)}var q=c.create("div",{className:"muiNotifyTitleLabel",innerHTML:this.label},r);var s=c.create("div",{className:"muiNotifyBaseInfo"},r);if(this.icon){var u=c.create("div",{className:"muiNotifyPersonHeadIcon"},s);c.create("img",{src:g.formatUrl(this.icon),className:"muiNotifyPersonHeadImg"},u)}var t=c.create("div",{className:"muiNotifyTextInfo"},s);if(this.creator){var w=c.create("span",{innerHTML:this.creator,className:"muiNotifyPersonName"},t)}if(this.created){var x=c.create("span",{innerHTML:this.created,className:"muiNotifyDate"},t)}if(this.modelNameText){var v=c.create("span",{innerHTML:this.modelNameText,className:"muiNotifyModelName"},t)}if(this.lbpmCurrNodeValue){var p=c.create("span",{innerHTML:this.lbpmCurrNodeValue,className:"muiNotifyProcessStatus"},t)}},buildNotifyOperateBtnRender:function(){if((this.fdType=="1"||this.fdType=="3")&&this.isDone=="false"&&this.href){var q=c.create("div",{className:"muiNotifyOperateBtnContainer"},this.domNode);var p=c.create("div",{className:"muiNotifyOperateBtn muiNotifyGoToBtn"},q);p.innerText=o["sysNotifyTodo.mobile.list.button.goTo"];this._bindGoToDetailPageClick(p)}if(this.fdType=="2"&&this.isDone=="false"){var q=c.create("div",{className:"muiNotifyOperateBtnContainer"},this.domNode);if(this.href){var p=c.create("div",{className:"muiNotifyOperateBtn muiNotifyGoToBtn"},q);p.innerText=o["sysNotifyTodo.mobile.list.button.goTo"];this._bindGoToDetailPageClick(p)}var r=c.create("div",{className:"muiNotifyOperateBtn muiNotifySetReadBtn"},q);r.innerText=o["sysNotifyTodo.mobile.list.button.setRead"];this.connect(r,"click",b.hitch(this._onSetReadBtnClick))}},_bindGoToDetailPageClick:function(p){this.connect(p,"click",b.hitch(this,function(){l.open(this.href,"_self")}))},_onSetReadBtnClick:function(p){this._removeNotify()},_removeNotify:function(){var p=this;var q="/sys/notify/sys_notify_todo/sysNotifyTodo.do?method=deleteall&s_ajax=true";d.post(g.formatUrl(q),{headers:{Accept:"application/json"},handleAs:"json",data:{List_Selected:[this.fdId]}}).response.then(function(r){if(r.status==200&&r.data.status==true){p.getParent().reload();f.publish("/mui/list/onRefreshNavCount",p.getParent().getParent())}})},makeLockLinkTip:function(p){h(p,"click",function(q){m.tip({icon:"mui mui-warn",text:"暂不支持移动访问"})})},_setLabelAttr:function(p){if(p){this._set("label",p)}}});return n})},"sys/notify/mobile/resource/js/list/ViewChange":function(){define(["dojo/topic","dijit/registry"],function(b,a){b.subscribe("/dojox/mobile/viewChanged",function(c){setTimeout(function(){var e=c.getIndexInParent();var d=document.getElementById("fastReviewTodo");if(d){d.style.display=e==0?"block":"none";a.byId("fastReviewTodo").resize();a.byId("scrollView").resize()}},1)})})},"sys/notify/mobile/resource/js/search/SearchBarDialogMixin":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/dom-construct","dojo/dom-class","dojo/topic","mui/util","dojo/touch","dojox/mobile/_css3","dojox/mobile/TransitionEvent","dijit/registry","dojo/query"],function(d,g,b,j,e,f,c,k,i,a,h){return d("notify.search.SearchBarDialogMixin",null,{modelName:"",searchCancelEvt:"/mui/search/cancel",searchShowEvt:"/mui/searchbar/show",show:function(l){var m={moveTo:"cardSearchView"};new i(l.target,m).dispatch();document.getElementById("keyWord").value="";e.publish("/mui/list/adjustDestination",this,{y:0});e.publish("/mui/search/showsearch");this.setSearchType()},hideSearchBar:function(l){},setSearchType:function(){var l=a.byId("_navBar");var o=l.selectedItem;var m="todo";var p=f.getUrlParameter(o.url,"fdType");var r=f.getUrlParameter(o.url,"oprType");var n=f.getUrlParameter(o.url,"dataType");if(p=="2"&&r=="doing"||n=="toview"){m="toview"}if(n=="toviewdone"){m="toviewdone"}if(n=="tododone"||r=="done"){m="tododone"}var q=a.byNode(h(".muiNotifySearchType")[0]);q.setValue(m)}})})},"sys/notify/mobile/resource/js/search/SearchButtonBar":function(){define(["dojo/_base/declare","mui/header/HeaderItem","mui/folder/_Folder","sys/notify/mobile/resource/js/search/SearchBarDialogMixin"],function(b,c,a,d){return b("notify.search.SearchButtonBar",[c,a,d],{icon:"mui mui-search",baseClass:"muiSearchButton"})})},"sys/notify/mobile/resource/js/list/CardItemListMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojox/mobile/viewRegistry","dijit/registry","dojo/dom-style","mui/list/_TemplateItemListMixin","sys/notify/mobile/resource/js/list/CardItemMixin","mui/device/adapter"],function(d,b,e,i,a,g,c,f,h){return d("sys.notify.list.CardItemListMixin",[c],{itemTemplateString:null,itemRenderer:f,startup:function(){this.inherited(arguments);this.connect(window,"pageshow","_pageshow");this.subscribe("/mui/list/loaded","_onLoaded")},_onLoaded:function(j){h.resume(function(){window.location.reload()})},_pageshow:function(j){if(j.persisted){if(a.byNode(this.domNode)&&this._isVisible(true)){window.location.reload()}}},_isVisible:function(j){var k=function(m){return g.get(m,"display")!=="none"};if(j){for(var l=this.domNode;l&&l.tagName!=="BODY";l=l.parentNode){if(!k(l)){return false}}return true}else{return k(this.domNode)}}})})},"sys/notify/mobile/resource/js/notifyMainViewMixin":function(){define(["dojo/_base/declare","dojo/dom-style"],function(b,a){return b("notify.index.notifyMainViewMixin",null,{resize:function(){a.set(this.domNode,{height:document.documentElement.clientHeight+"px"})}})})},"sys/notify/mobile/resource/js/search/NotifyTypeSelect":function(){define(["dojo/_base/declare","dojo/topic","dojo/dom-class","dojo/dom-style","dojo/query","dojo/dom-construct","dijit/_WidgetBase"],function(d,b,f,c,g,a,e){return d("notify.search.NotifyTypeSelect",[e],{optionDatas:[],name:"",value:null,status:"collapse",isInitSetValue:true,buildRendering:function(){this.inherited(arguments);this.selectContainerNode=a.create("div",{className:"muiNotifyTypeSelectContainer"},this.domNode);this.selectTextNode=a.create("div",{className:"muiNotifyTypeSelectText muiFontSizeM muiFontColorInfo"},this.selectContainerNode);var i=a.create("div",{className:"muiNotifyTypeSelectStatusContainer"},this.selectContainerNode);this.iconNode=a.create("i",{className:"fontmuis"},i);this.selectOptionsBaseLine=a.create("div",{className:"muiNotifyTypeSelectOptionsBaseLine"},this.selectContainerNode);this.selectHiddenNode=a.create("input",{type:"hidden",name:this.name},this.selectContainerNode);this.selectOptionsDialog=a.create("div",{className:"muiNotifyTypeSelectOptionsDialog"},document.body);this.optionContainer=a.create("div",{className:"muiNotifyTypeSelectOptionsContainer"},this.selectOptionsDialog);this._buildOptionElement(this.optionContainer,this.optionDatas);this._setStatus(this.status);this.setValue(this._getDefaultValue());this.isInitSetValue=false;this.connect(this.selectContainerNode,"click","_selectClick");var h=this;window.addEventListener("resize",function(){if(h.status=="expand"){var j=h.selectOptionsBaseLine.getBoundingClientRect().top;c.set(h.selectOptionsDialog,"top",j+"px");c.set(h.selectOptionsDialog,"height",(document.documentElement.clientHeight-j)+"px")}})},setValue:function(p){var o=false;if(p){var n=-1;if(this.optionDatas.length>0){for(var l=0;l<this.optionDatas.length;l++){var q=this.optionDatas[l];if(q.value==p){n=l;break}}}if(n!=-1){if(!this.isInitSetValue&&this.value&&this.value!=p){o=true}this.value=p;this.selectHiddenNode.value=this.value;this.selectTextNode.innerText=this.optionDatas[n].text;var m=g(".muiNotifyTypeSelectOption",this.optionContainer);for(var h=0;h<m.length;h++){var j=m[h];if(h==n){f.remove(j,"muiFontColorInfo");f.add(j,"muiFontColor")}else{f.remove(j,"muiFontColor");f.add(j,"muiFontColorInfo")}}}}if(o){b.publish("/mui/notify/select/change",p)}},_getDefaultValue:function(){var h=null;if(this.optionDatas.length>0){if(this.value){for(var j=0;j<this.optionDatas.length;j++){if(this.optionDatas[j].value==this.value){h=this.optionDatas[j].value}}}else{h=this.optionDatas[0].value}}return h},_setStatus:function(h){this.status=h;if(this.status=="collapse"){f.remove(this.iconNode,"muis-put-away");f.add(this.iconNode,"muis-spread");c.set(this.selectOptionsDialog,"display","none");if(this.handle){this.disconnect(this.handle)}}else{if(this.status=="expand"){f.remove(this.iconNode,"muis-spread");f.add(this.iconNode,"muis-put-away");c.set(this.selectOptionsDialog,"display","block");var i=this.selectOptionsBaseLine.getBoundingClientRect().top;c.set(this.selectOptionsDialog,"top",i+"px");c.set(this.selectOptionsDialog,"height",(document.documentElement.clientHeight-i)+"px");this.handle=this.connect(document.body,"touchend","unClick")}}},unClick:function(h){var j=h.target,i=true;while(j){if(j==this.optionContainer||j==this.selectContainerNode){i=false;break}j=j.parentNode}if(i){this.defer(function(){if(this.status=="expand"){this._setStatus("collapse")}},1)}},_selectClick:function(){var h="";if(this.status=="collapse"){h="expand"}else{if(this.status=="expand"){h="collapse"}}this._setStatus(h)},_buildOptionElement:function(j,k){var h=this;for(var l=0;l<k.length;l++){var n=k[l];var m=a.create("div",{className:"muiNotifyTypeSelectOption muiFontSizeM"},j);m.innerText=n.text;this.connect(m,"click",(function(i){return function(o){if(o){if(o.stopPropagation){o.stopPropagation()}if(o.cancelBubble){o.cancelBubble=true}if(o.preventDefault){o.preventDefault()}if(o.returnValue){o.returnValue=false}}h.setValue(i.value);h._setStatus("collapse")}})(n))}}})})},"sys/notify/mobile/resource/js/search/SearchNotifyMain":function(){require(["dojo/topic","dojo/ready","dijit/registry","dojo/on","dojox/mobile/TransitionEvent","mui/util","mui/device/adapter","dojo/dom-style","dojo/dom","dojo/query","dojo/request","mui/dialog/Tip","mui/i18n/_i18n!sys/notify/mobile/resource/js/mui-sys-notify"],function(e,k,a,h,j,f,l,g,d,i,c,m,b){window.checkKeyword=function(o){var n=i(".muiNotifySearchClear",d.byId("cardSearchView"))[0];if(o){g.set(n,{display:"inline-block"})}else{g.set(n,{display:"none"})}};window.onHrefBackToMainView=function(o){var n="sys/notify/mobile/index.jsp?moduleName="+f.getUrlParameter(location.href,"moduleName");window.location.href=f.formatUrl(n)};window.resetKeyword=function(){document.getElementsByName("keyWord")[0].value="";checkKeyword()};window.onBackToMainView=function(o){var n={moveTo:"notifyMainView"};new j(document.body,n).dispatch()};window._onSearch=function(n){var r="/sys/notify/mobile/searchresult.jsp?keyword=!{keyword}&moduleName=!{moduleName}&searchType=!{searchType}";if(n.keyWord.value!=""&&n.query){var q=f.getUrlParameter(location.href.replace(location.hash,""),"moduleName");var p=f.formatUrl(f.urlResolver(r,{keyword:n.keyWord.value,moduleName:q,searchType:n.searchType}));p=p+location.hash;var o=this;setTimeout(function(){e.publish("/notify/search/submit",o,{url:p})},300)}return false};window._onSubmit=function(o,n){if(n&&n.url){window.location.href=n.url}};window._onKeydown=function(q){var p=q.keyCode;if(q.keyCode==13&&q.target&&q.target.value){var o=q.target.value;var n=document.getElementsByName("searchType")[0].value;_onSearch({keyWord:{value:o},searchType:n,query:true})}};window._onSearchTypeChange=function(o,n){if(o.name=="searchType"){var p=document.getElementsByName("keyWord")[0].value;if(p){_onSearch({keyWord:{value:p},searchType:n.value,query:true})}}},window.mobile_fastApprove=function(q,n,o){var p={processId:q,opType:n};c.post(f.formatUrl("/sys/lbpmperson/sys_lbpmperson_myprocess/SysLbpmPersonMyProcess.do?method=approveOne"),{data:p,handleAs:"json",sync:true}).then(function(r){var s=document.getElementById("reviewOp_"+o);if(s){if(n=="pass"){s.innerHTML="<span class='muiFastReviewTodoOperatedTag'>"+b["mui.lbpmperson.fastreview.approve"]+"</span>"}else{if(n=="refuse"){s.innerHTML="<span class='muiFastReviewTodoOperatedTag'>"+b["mui.lbpmperson.fastreview.reject"]+"</span>"}}if(n=="assignPass"){s.innerHTML="<span class='muiFastReviewTodoOperatedTag'>"+b["mui.lbpmperson.fastreview.assignpass"]+"</span>"}else{if(n=="assignRefuse"){s.innerHTML="<span class='muiFastReviewTodoOperatedTag'>"+b["mui.lbpmperson.fastreview.assignrefuse"]+"</span>"}}}},function(){m.fail({text:"执行获取数据过程中出错!"})})};e.subscribe("/notify/search/submit",_onSubmit);e.subscribe("/mui/form/valueChanged",_onSearchTypeChange);h(d.byId("keyWord"),"keydown",_onKeydown)})}}});