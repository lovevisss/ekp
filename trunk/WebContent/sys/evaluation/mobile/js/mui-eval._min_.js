require({cache:{"sys/evaluation/mobile/js/EvaluationAdditionItem":function(){define(["dojo/_base/declare","dojo/dom-construct","dojox/mobile/_ItemBase","mui/util","mui/i18n/_i18n!sys/evaluation/mobile/js/mui-eval","dojo/html"],function(e,c,b,a,g,d){var f=e("sys.evaluation.EvaluationItemMixin",[b],{tag:"li",fdEvaluationIntervalTime:"",fdId:"",fdEvaluationContent:"",buildRendering:function(){this._templated=!!this.templateString;if(!this._templated){this.domNode=this.containerNode=this.srcNodeRef||c.create(this.tag,{className:"muiEvaluationAdditionItem"})}this.inherited(arguments);if(!this._templated){this.buildInternalRender()}},buildInternalRender:function(){this.contentNode=c.create("div",{className:"muiEvaluationAdditionContent"},this.domNode,"last");if(this.fdEvaluationIntervalTime){this.timeNode=c.create("div",{className:"muiEvaluationCreated",innerHTML:g["sysEvaluationMain.addition"]+"&nbsp<i class='mui mui-time'></i>"+this.fdEvaluationIntervalTime},this.contentNode)}if(this.fdEvaluationContent){this.summaryNode=c.create("p",{className:"muiEvaluationSummary",innerHTML:this.fdEvaluationContent.replace(/&lt;br&gt;/g,"<br>").replace(/&amp;nbsp;/g," ")},this.contentNode)}this.attachmentDiv=c.create("div",{className:"muiPostAttchment"},this.contentNode);var h=this;var i="/sys/attachment/mobile/import/view.jsp?fdKey=eval_"+this.fdId+"&fdModelName=com.landray.kmss.sys.evaluation.model.SysEvaluationMain&fdModelId="+this.fdId;require(["dojo/text!"+a.formatUrl(i)],function(k){c.empty(h.attachmentDiv);var j=new d._ContentSetter({node:h.attachmentDiv,parseContent:true,cleanContent:true});j.set(k);j.tearDown()});this.inherited(arguments)},startup:function(){if(this._started){return}this.inherited(arguments)}});return f})},"sys/evaluation/mobile/js/EvaluationHeader":function(){define(["dojo/_base/declare","dojo/dom-class","dijit/_WidgetBase","dojo/dom-style","dojo/dom-construct","dojo/topic","dojo/request","mui/util","dojo/_base/array","dojo/dom-geometry","mui/rating/Rating","dojox/mobile/viewRegistry","mui/i18n/_i18n!sys/evaluation/mobile/js/mui-eval"],function(e,m,k,h,c,f,d,g,j,a,i,l,b){return e("sys.evaluation.EvaluationHeader",[k],{fdModelId:"",fdModelName:"",scoreDetail:[],evalCount:0,url:"/sys/evaluation/sys_evaluation_main/sysEvaluationMain.do?method=dataScore&fdModelId=!{fdModelId}&fdModelName=!{fdModelName}",_setScoreDetailAttr:function(){var n=new Array();for(var o=0;o<5;o++){n.push({score:o,times:0,star:5-o})}this.scoreDetail=n},startup:function(){this.inherited(arguments);this._request()},_request:function(){var n=g.urlResolver(this.url,{fdModelId:this.fdModelId,fdModelName:this.fdModelName});d.get(g.formatUrl(n),{handleAs:"json"}).then(function(o){this.evaData=o;f.publish("/sys/evaluation/header/data",this,o)},function(o){f.publish("/sys/evaluation/header/data",this,{error:true,msg:o})})},postCreate:function(){this.subscribe("/sys/evaluation/header/data","_onCompleted");this.subscribe("/mui/list/onPull","handleOnReload");this.subscribe("/mui/list/onReload","handleOnReload")},buildRendering:function(){this.inherited(arguments);this.container=c.create("div",{className:"muiEvaluationHeaderContainer"},this.domNode)},_onCompleted:function(o,n){if(n.error){this.container.innerHTML=b["mui.sysEvaluation.mobile.header.err"];return}if(this.content){this._initData();c.empty(this.container)}this.content=c.create("div",{className:"muiEvaluationHeaderContent"},this.container);this.buildLeftContent(n);this.buildRightContent(n)},buildLeftContent:function(q){j.forEach(q.detail,function(t){var u=parseInt(t.times);this.scoreDetail[parseInt(t.score)].times=u;this.evalCount+=u},this);var n=c.create("div",{className:"muiEvaluationHeaderLeft"},this.content);var o=q.average;var s="";var r="muiEvaluationHeaderScore";if(this.evalCount<=0){r="muiEvaluationHeaderNone";s=b["mui.sysEvaluation.mobile.header.noScore"]}else{s=o+"<span class='muiEvaluationScoreUnit'>"+b["mui.sysEvaluation.mobile.header.score"]+"</span>"}c.create("div",{className:r,innerHTML:s},n);var p=new i({value:o});n.appendChild(p.domNode);c.create("div",{className:"muiEvaluationHeadeCount",innerHTML:(b["mui.sysEvaluation.mobile.header.count"].replace("%count%",this.evalCount))},n)},buildRightContent:function(p){this.leftDom=c.create("div",{className:"muiEvaluationHeadeRight"},this.content);var o=c.create("ul",{className:"muiEvaluationHistogramContainer"},this.leftDom);var n=a.getContentBox(o).w-60;j.forEach(this.scoreDetail,function(r){if(this.evalCount<=0){r.item_with="0px"}else{var q=r.times/this.evalCount;r.percent=(q*100)+"%";r.item_with=q*n+"px"}this._buildHistogram(o,r,n)},this)},_buildHistogram:function(s,p,n){var o=c.create("li",{className:"muiEvaluationHistogram"},s);c.create("span",{className:"muiEvaluationHistogramTitle",innerHTML:p.star+b["mui.sysEvaluation.mobile.header.star"]},o);var r=c.create("span",{className:"muiEvaluationHistogramContent"},o);h.set(r,{width:n+"px"});var q=c.create("span",{className:"muiEvaluationHistogramBody"},r);h.set(q,{width:p.item_with});c.create("span",{className:"muiEvaluationHistogramNum",innerHTML:p.times},o)},destroyContainerRendering:function(){if(this.container){c.empty(this.container)}},_initData:function(){this.evalCount=0;this._setScoreDetailAttr()},handleOnReload:function(p,o){var n=l.getEnclosingScrollable(this.domNode);if(p===n){this._request(o)}}})})},"sys/evaluation/mobile/js/Eval":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/dom-style","dojo/dom-attr","dijit/_WidgetBase","mui/util","mui/dialog/Tip","dojo/html","dojo/text!./eval.jsp","dojo/query","dojo/_base/lang","dojo/dom","dojo/_base/array","dojo/request","dojo/topic","dijit/registry","dojo/window","mui/i18n/_i18n!sys/evaluation/mobile/js/mui-eval","mui/form/CheckBox","sys/attachment/mobile/js/AttachmentList","dojo/text!./eval_att.jsp","dojo/parser"],function(u,h,m,p,s,l,a,o,n,k,g,w,r,i,c,q,j,e,f,t,v,d,b){return u("sys.evaluation.Eval",[l],{mask:null,attKeyPrefix:"eval_",attModelId:"",limitNum:1000,value:4,lock:false,submitEnableClass:"muiEvalSubmitEnable",SELECTED_EVENT:"/mui/rating/ratingSelected",fdIsCommented:false,grades:{eval_grade_1:f["mui.sysEvaluation.mobile.oneStar.showText"],eval_grade_2:f["mui.sysEvaluation.mobile.twoStar.showText"],eval_grade_3:f["mui.sysEvaluation.mobile.threeStar.showText"],eval_grade_4:f["mui.sysEvaluation.mobile.fourStar.showText"],eval_grade_5:f["mui.sysEvaluation.mobile.oneStar.fiveText"]},tips:{eval_tip_1:f["mui.sysEvaluation.oneStar.showText"],eval_tip_2:f["mui.sysEvaluation.twoStar.showText"],eval_tip_3:f["mui.sysEvaluation.threeStar.showText"],eval_tip_4:f["mui.sysEvaluation.fourStar.showText"],eval_tip_5:f["mui.sysEvaluation.oneStar.fiveText"]},buildRendering:function(){this.domNode=this.containerNode;this.inherited(arguments)},postCreate:function(){this.subscribe("/sys/evaluation/header/data","headerLoaded")},startup:function(){this.inherited(arguments);this.connect(this.domNode,"onclick","evalClick");q.publish("/sys/evaluation/loaded",[this])},evalClick:function(x){this.defer(this.showMask,350)},bindInput:function(){var x=this.inputNode[0];this.connect(x,"onfocus","doFocus");this.connect(x,"onblur","doBlur");this.connect(x,"onkeyup","doKeyup");this.connect(x,"oninput","doInput")},bindSubmit:function(){this.submitHandle=this.connect(this.submitNode[0],"onclick","doSubmit")},bindHideMask:function(){this.hideMaskNode.on("click",w.hitch(this,this.hideMask))},buildMask:function(){if(this.container){this._showMask();return}var y=this;var x=new n._ContentSetter({parseContent:true,onBegin:function(){this.content=this.content.replace("!{starklass}","mui/rating/Rating").replace("!{startShow}",y.fdIsCommented?"none":"block").replace("!{additionTxtShow}",y.fdIsCommented?"block":"none");if(y.notifyOtherName){var z="<input type=\"checkbox\" data-dojo-type=\"mui/form/CheckBox\" data-dojo-props=\"showStatus:'edit',name:'notifyOther',text:'"+y.notifyOtherNameText+"',value:'"+y.notifyOtherName+"'\">";this.content=this.content.replace('<span id="_notifyOtherName"></span>',z)}this.inherited("onBegin",arguments)}});this.container=h.create("div",{className:"muiEvalMask"},document.body,"last");x.node=this.container;x.set(k);x.tearDown();var y=this;setTimeout(function(){y.ulContainer=g("ul",y.container);y._showMask()},1);this.submitNode=g(".muiEvalSubmit",this.container);this.bindSubmit();this.inputNode=g(".muiEvalMaskText",this.container);this.bindInput();this.setInputValue(this.value);this.hideMaskNode=g(".muiEvalHideMask",this.container);this.connect(this.container,"onclick",this.hideNode);this.bindHideMask();this.subscribe(this.SELECTED_EVENT,w.hitch(this,this.scoreSelected))},hideNode:function(x){if("muiEvalMask"==x.target.className){this.hideMask()}},setInputValue:function(y){var x=this.tips["eval_tip_"+y];this.inputNode[0].value=x;this.validate()},scoreSelected:function(x){if(x!=null){var A=x.value;g('[name="fdEvaluationScore"]')[0].value=5-parseInt(A);var y=this.inputNode[0].value.trim(),z=this.isDefualt(y);if(y&&!z){return}this.setInputValue(A)}},isDefualt:function(z){var y=false;for(var x in this.tips){if(z==this.tips[x]){y=true;break}}return y},_showMask:function(){p.set(this.container,{display:"block",opacity:1});this.defer(function(){p.set(this.domNode,{display:"none"});this.ulContainer.style({"-webkit-transform":"translate3d(0px, 0px, 0px)",opacity:1});this.bulidEvalAtt()},200)},_hideMask:function(x){this.ulContainer.style({"-webkit-transform":"translate3d(0px, 400%, 0px)",opacity:0});this.defer(function(){p.set(this.container,{opacity:0});p.set(this.domNode,{display:"block"});if(!x){q.publish(this.SELECTED_EVENT,{value:this.value});j.byId("eval_star_opt").set("value",this.value)}},500);this.defer(function(){p.set(this.container,{display:"none"})},700)},destroyMask:function(x){if(!this.ulContainer){return}this._hideMask(x)},showMask:function(){if(this.lock==true){return}this.set("lock",true);this.defer(function(){this.buildMask()},350)},hideMask:function(x){this.defer(function(){this.destroyMask(x);this.set("lock",false)},350)},doFocus:function(){if(this.isDefualt(this.inputNode[0].value.trim())){this.inputNode[0].value=""}this.validate()},doBlur:function(){this.validate()},doKeyup:function(){this.validate()},doInput:function(){this.validate()},validate:function(){if(this._validate()){this.submitNode.addClass(this.submitEnableClass)}else{this.submitNode.removeClass(this.submitEnableClass)}},doSubmit:function(y){if(this.submitLock){return}if(!this._validate()){return}if(this.attObj&&!this.attObj.checkAttRules()){return}this.set("submitLock",true);var A={};var z=this;i.forEach(g("#eval_formData input"),function(C){A[s.get(C,"name")]=C.value});var x=j.findWidgets(g(".muiEvalNotifyTargetBar")[0]);i.forEach(x,function(C){if(C instanceof t&&C.checked===true){A[C.name]=C.value}});i.forEach(g(".muiEvalMask input[type='hidden']"),function(C){A[s.get(C,"name")]=C.value});A.fdId=this.attModelId;A.fdEvaluationContent=a.formatText(this.inputNode[0].value);var B=c.post(a.formatUrl("/sys/evaluation/sys_evaluation_main/sysEvaluationMain.do?method=save"),{data:A,timeout:30000,handleAs:"json"});B.response.then(function(C){if(C.status==200){var D=C.data;if(D.status==true){z.attModelId=C.data.newId;o.success({text:f["mui.sysEvaluation.success"]})}else{if(D.msg){o.warn({text:D.msg})}}z.inputNode[0].value="";q.publish("/mui/list/toTop",this,{time:0});z.defer(function(){q.publish("/mui/list/onPull",j.byId("eval_scollView"));z.set("submitLock",false)},300);z.setFdIsCommented(true);z.destroyEvalAtt()}else{o.fail({text:f["mui.sysEvaluation.fail"]})}});this.hideMask()},_validate:function(){var y=false;var B=this.inputNode[0].value.trim();var A=B.length;var x=0;for(var z=0;z<A;z++){if(B[z].charCodeAt(0)<299){x++}else{x+=2}}if(x<=2*this.limitNum&&x>0){y=true}if(y){g("#contentLength",this.container)[0].innerHTML=""}else{if(x>0){g("#contentLength",this.container)[0].innerHTML=Math.ceil((this.limitNum*2-x)/2)}}return y},setFdIsCommented:function(x){if(this.fdIsCommented===x){return}if(x){this.fdIsCommented=true;if(this.container){p.set(g("[data-mark='muiEvalGrade']")[0],"display","none");p.set(g("[data-mark='muiEvalAdd']")[0],"display","block")}}else{this.fdIsCommented=false;if(this.container){p.set(g("[data-mark='muiEvalGrade']")[0],"display","block");p.set(g("[data-mark='muiEvalAdd']")[0],"display","none")}}},headerLoaded:function(y,x){if(x&&x.myEvalId){this.setFdIsCommented(true)}else{this.setFdIsCommented(false)}},bulidEvalAtt:function(){if(this.attObj){return}var y=this;var z=d.replace("!{fdModelId}",y.attModelId).replace("!{fdKey}",y.attKeyPrefix+y.attModelId);var x=g("#_eval_att_node")[0];h.place(h.toDom(z),x,"last");b.parse(x).then(function(A){for(var B=0;B<A.length;B++){if(A[B] instanceof v){y.attObj=A[B];m.add(y.attObj.domNode,"muiEvalAttList");break}}})},destroyEvalAtt:function(){this.attObj&&this.attObj.destroyRecursive(false);this.attObj=null}})})},"sys/evaluation/mobile/js/EvaluationItemMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/dom-style","dojo/dom-attr","dojox/mobile/_ItemBase","mui/rating/Rating","mui/util","sys/evaluation/mobile/js/EvaluationReplyListMixin","dojo/html","mui/form/editor/plugins/lingling/SysFaceConfig"],function(b,a,j,f,h,k,g,e,d,c,i){var l=b("sys.evaluation.EvaluationItemMixin",[k,d],{tag:"li",summary:"",created:"",score:0,label:"",icon:"",tabIndex:"",buildRendering:function(){this._templated=!!this.templateString;if(!this._templated){this.domNode=this.containerNode=this.srcNodeRef||a.create(this.tag,{className:"muiEvaluationItem"})}this.inherited(arguments);if(!this._templated){this.buildInternalRender()}},buildInternalRender:function(){if(this.icon){var n=a.create("div",{className:"muiEvaluationIcon"},this.containerNode);this.imgNode=a.create("div",{className:"muiEvaluationImg"},n);f.set(this.imgNode,{"background-image":"url("+e.formatUrl(this.icon)+")","background-size":"cover"})}this.contentNode=a.create("div",{className:"muiEvaluationContent"},this.domNode,"last");if(this.label){this.labelNode=a.create("h2",{className:"muiEvaluationInfo"},this.contentNode);a.create("span",{className:"muiEvaluationLabel muiAuthor",innerHTML:this.label},this.labelNode);this.starNode=a.create("span",{className:"muiEvaluationScore"},this.labelNode);var p=new g({value:5-parseInt(this.score,10)});this.starNode.appendChild(p.domNode)}if(this.created){this.createdNode=a.create("div",{className:"muiEvaluationCreated",innerHTML:'<i class="mui mui-time"></i>'+this.created},this.contentNode)}if(this.summary){this.summaryNode=a.create("p",{className:"muiEvaluationSummary",innerHTML:i.replaceFace(this.summary)},this.contentNode)}this.attachmentDiv=a.create("div",{className:"muiPostAttchment"},this.contentNode);var m=this;var o="/sys/attachment/mobile/import/view.jsp?fdKey=eval_"+this.fdId+"&fdModelName=com.landray.kmss.sys.evaluation.model.SysEvaluationMain&fdModelId="+this.fdId;require(["dojo/text!"+e.formatUrl(o)],function(r){a.empty(m.attachmentDiv);var q=new c._ContentSetter({node:m.attachmentDiv,parseContent:true,cleanContent:true});q.set(r);q.tearDown()});this.additionNode=a.create("ul",{className:"muiEvaluationAdditionNode","data-addition-node":this.fdId},this.domNode);this.inherited(arguments)},startup:function(){if(this._started){return}this.inherited(arguments)},_setLabelAttr:function(m){if(m){this._set("label",m)}}});return l})},"sys/evaluation/mobile/js/EvaluationItemListReplyMixin":function(){define(["dojo/_base/declare","mui/util","dojo/_base/array","dojo/request","dojo/_base/json","dojo/query","dojo/dom-construct","mui/i18n/_i18n!sys/evaluation/mobile/js/mui-eval"],function(d,b,h,f,c,g,a,e){return d("sys.evaluation.EvaluationItemListReplyMixin",null,{replyUrl:"/sys/evaluation/sys_evaluation_main/sysEvaluationReply.do?method=listReplyCount",moreClass:"muiEvalReplyMoreMessage",loadedHandle:function(i){this.inherited(arguments);this.requestReply()},requestReply:function(){if(!this.ids){return}var i=this;f.post(b.formatUrl(this.replyUrl),{data:{ids:this.ids}}).response.then(function(k){var j=c.fromJson(k.text);i.moreNode(j)})},moreNode:function(j){for(var k=0;k<j.length;k++){var m=j[k];var l=g("#reply_"+m.value);a.create("div",{className:this.moreClass,innerHTML:e["mui.sysEvaluation.mobile.reply.count"].replace("%count%",m.text)},l[0])}}})})},"sys/evaluation/mobile/js/EvaluationReplyItemMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/dom-style","dojo/dom-attr","dojox/mobile/_ItemBase","mui/util","mui/form/editor/EditorUtil","dojo/topic","dijit/registry","sys/evaluation/mobile/js/EvaluationReplyPostMixin","sys/evaluation/mobile/js/_EvaluationReplyLinkItem","mui/form/editor/plugins/lingling/SysFaceConfig","mui/i18n/_i18n!sys/evaluation/mobile/js/mui-eval"],function(d,c,l,g,i,m,f,k,e,a,o,h,j,b){var n=d("sys.evaluation.EvaluationReplyItemMixin",[m,o,h],{"class":"muiEvalReplyLi",tabIndex:"",replyContent:"",replyId:"",replyTime:"",replyerId:"",replyerName:"",parentReplyerName:"",parentReplyerId:"",currentUserId:"",buildRendering:function(){this.inherited(arguments);this.contentNode=c.create("div",{className:"muiEvalReplyContent"},this.domNode);var p=this.parentReplyerName?(b["mui.sysEvaluation.mobile.btnReply"]+"<span class='muiAuthor'>"+this.parentReplyerName+"：</span>"):"：";this.replyNode=c.create("div",{innerHTML:"<span class='muiAuthor'>"+this.replyerName+"</span>"+p+j.replaceFace(this.replyContent)+"<div class='muiEvaluationReplyCreated'>"+this.replyTime+"</span>"},this.contentNode)},_onClick:function(p){if(this.currentUserId==this.replyerId){return false}this.inherited(arguments);this.replyClick(p)},replyClick:function(p){var q=this;var s=this.getParent(),r=s.getParent();this._onReplyClick({name:"replyContent",data:{fdEvaluationId:s.fdId,mainModelId:r.fdModelId,mainModelName:r.fdModelName,evalMark:1,replyId:q.replyId},placeholder:b["mui.sysEvaluation.mobile.btnReply"]+this.replyerName+"："})},startup:function(){if(this._started){return}this.inherited(arguments)},_setLabelAttr:function(p){if(p){this._set("label",p)}}});return n})},"sys/evaluation/mobile/js/EvaluationReplyListMixin":function(){define(["dojo/_base/declare","mui/form/editor/EditorUtil","dojo/dom-construct","mui/dialog/OperaTip","dojo/dom-class","mui/util","dojo/request","dojo/_base/json","dojo/_base/array","sys/evaluation/mobile/js/EvaluationReplyItemMixin","dojo/dom-style","sys/evaluation/mobile/js/EvaluationReplyPostMixin","mui/i18n/_i18n!sys/evaluation/mobile/js/mui-eval"],function(f,j,d,a,k,g,e,m,i,c,h,n,b){var l=f("sys.evaluation.EvaluationReplyListMixin",[n],{replyGetUrl:"/sys/evaluation/sys_evaluation_main/sysEvaluationReply.do?method=listReplyInfo&fdEvaluationId=!{fdId}",startup:function(){this.inherited(arguments);this.bindMoreClick()},onReplyClick:function(){var o=this,p=o.getParent();this._onReplyClick({name:"replyContent",data:{fdEvaluationId:o.fdId,mainModelId:p.fdModelId,mainModelName:p.fdModelName,evalMark:0},placeholder:b["mui.sysEvaluation.mobile.replyContent"]})},bindMoreClick:function(){this.connect(this.domNode,"onclick","moreClick")},moreClick:function(o){var p=o.target;if(p&&k.contains(p,"muiEvalReplyMoreMessage")){if(!this.isReplyed){this.isReplyed=true;this.requestReply();h.set(p,{display:"none"})}}},requestReply:function(){var o=this;e.get(g.formatUrl(g.urlResolver(this.replyGetUrl,{fdId:this.fdId})),null).response.then(function(r){var p=m.fromJson(r.text);var q=p.replyInfo;i.forEach(q,function(s){d.place(this.createItem(s).domNode,this.replyContentNode)},o)})},createItem:function(p){var o=new c(p);o.startup();return o},buildInternalRender:function(){this.replyNode=d.create("div",{id:"reply_"+this.fdId,className:"muiEvalReplyMore"},this.containerNode);this.replyContentNode=d.create("div",{className:"muiEvalReplyMoreContent"},this.replyNode);this.operationNode=d.create("div",{className:"muiEvalReplyOpt",innerHTML:'<div class="muiEvalReplyOperation"><span class="l"></span><span class="f"></span><i class="mui mui-more"></i></div>'},this.labelNode);this.connect(this.operationNode,"click","onOperationClick")},onOperationClick:function(o){if(this.operaTip&&this.operaTip.isShow){return}this.operas=[];var p=this;this.operaTip=a.tip({refNode:this.operationNode,operas:[{icon:"mui-msg",text:b["mui.sysEvaluation.mobile.btnReply"],func:function(){p.onReplyClick()}}]})}});return l})},"sys/evaluation/mobile/js/_EvaluationReplyLinkItem":function(){define(["dojo/_base/declare","dojo/dom-class"],function(a,b){return a("sys.evaluation.mobile.js._EvaluationReplyLinkItem",null,{_selClass:"actived",_selStartMethod:"touch",_setSelectedAttr:function(c){this.inherited(arguments);if(this.currentUserId==this.replyerId){return}b.toggle(this.domNode,this._selClass,c)},handleSelection:function(c){this.set("selected",true)},makeTransition:function(c){this.defer(function(){this.set("selected",false)},100)},_onClick:function(c){this.defaultClickAction(c)}})})},"sys/evaluation/mobile/js/EvaluationAdditionListMixin":function(){define(["dojo/_base/declare","mui/util","dojo/_base/array","dojo/request","dojo/_base/json","dojo/query","dojo/dom-construct","mui/i18n/_i18n!sys/evaluation/mobile/js/mui-eval","sys/evaluation/mobile/js/EvaluationAdditionItem"],function(e,f,g,d,i,h,c,b,a){return e("sys.evaluation.EvaluationAdditionListMixin",null,{additionUrl:"/sys/evaluation/sys_evaluation_main/sysEvaluationMain.do?method=getEvaluationByParentIds",loadedHandle:function(j){this.inherited(arguments);this.requestAddition()},requestAddition:function(){if(!this.idList||this.idList.length<=0){return}var j=this;d.post(f.formatUrl(this.additionUrl),{handleAs:"json",data:{ids:this.idList,fdModelName:this.fdModelName,fdModelId:this.fdModelName}}).response.then(function(k){j.buildAddition(k.data)})},buildAddition:function(n){var o=this.id,p;for(var k in n){var m=h("#"+o+" [data-addition-node='"+k+"']")[0];for(var j=0;j<n[k].length;j++){var l=this._createAdditionItem(n[k][j]);m.appendChild(l.domNode)}}},_createAdditionItem:function(k){var j=new a(k);j.startup();return j}})})},"sys/evaluation/mobile/js/TabBarButton":function(){define(["dojo/_base/declare","dojox/mobile/TabBarButton","dojo/dom-class","dojo/dom-style","dojox/mobile/Badge","mui/util","dojo/_base/lang","dojo/dom-attr","dojox/mobile/viewRegistry","dojo/query","dojo/_base/array","mui/device/adapter"],function(b,l,k,e,c,d,a,h,j,g,f,i){return b("mui.tabbar.TabBarButton",[l],{inheritParams:function(){this.inherited(arguments);return !!this.getParent()},transition:"slide",colSize:1,href:null,align:"center",tabIndex:"",_setAlignAttr:function(m){this.align=m},buildRendering:function(){this.inherited(arguments);if(!this.label&&this.getParent()!=null){k.add(this.getParent().domNode,"muiNavBarButton")}if(this.icon1&&this.label){k.add(this.domNode,"muiButtonVertical")}if(this.label&&!this.icon1){this.labelNode.innerHTML=this.label}},isNull:function(m){return m==undefined||m==null||m==""},startup:function(){if(this._started){return}if(this.align!="center"&&this.iconDivNode){e.set(this.iconDivNode,{"float":this.align})}if(this.iconDivNode){k.add(this.iconDivNode,"mui-scale");this.defer(a.hitch(this,function(){k.remove(this.iconDivNode,"mui-scale")}),500);if(!this.icon1){e.set(this.iconDivNode,{width:"0px"})}}this.inherited(arguments);var m=this;setTimeout(function(){m._CLICK_FLAG=true},300)},_setBadgeAttr:function(m){if(!this.badgeObj){this.badgeObj=new c();e.set(this.badgeObj.domNode,{position:"absolute",left:"50%","margin-left":"0.6rem",top:0})}if(parseInt(m)>=100){this.value=m="99+"}this.badgeObj.setValue(m);if(m){this.iconDivNode.appendChild(this.badgeObj.domNode)}else{if(this.iconDivNode===this.badgeObj.domNode.parentNode){this.iconDivNode.removeChild(this.badgeObj.domNode)}}},onClick:function(){if(!this._CLICK_FLAG){return}var n=document.activeElement;if(n&&n.blur){n.blur()}var m=arguments;this.defer(function(){if(this.href){i.open(d.formatUrl(this.href,true),"_blank")}this.inherited(m)},350);if(this.href){return false}},_onTouchStart:function(n){var m=j.getEnclosingScrollable(this.domNode);if(m&&k.contains(m.containerNode,"mblScrollableScrollTo2")){k.remove(m.containerNode,"mblScrollableScrollTo2")}this.inherited(arguments)},setDisabled:function(m){this.disabled=m;if(this.disabled){if(!this.__onClick){this.__onClick=this.onClick}this.onClick=function(){return false};k.add(this.domNode,"muiBtnDisabled")}else{if(this.__onClick){this.onClick=this.__onClick}k.remove(this.domNode,"muiBtnDisabled")}},_onTouchMove:function(o){var m=o.touches?o.touches[0].pageX:o.clientX;var q=o.touches?o.touches[0].pageY:o.clientY;if(Math.abs(m-this.touchStartX)>=8||Math.abs(q-this.touchStartY)>=8){this.cancel();var n=this.getParent();if(n&&n.selectOne){this._prevSel&&this._prevSel.set("selected",true)}else{this.set("selected",false)}}},_onTouchEnd:function(n){var m=this;if(!m._selTimer&&m._delayedSelection){return}m.cancel();m._hideKeyBoard();window.event=n;if(dojoConfig._native){this.defer(function(){m._onClick(n)},300)}else{m._onClick(n)}},_hideKeyBoard:function(){f.forEach(g("input,textarea")||[],function(m){try{m.blur()}catch(n){}})}})})},"sys/evaluation/mobile/js/EvaluationReplyPostMixin":function(){define(["dojo/_base/declare","mui/form/editor/EditorUtil","mui/util","dojo/_base/json","dojo/topic","dijit/registry","dojo/_base/lang"],function(f,d,a,e,c,b,h){var g=f("sys.evaluation.EvaluationReplyPostMixin",null,{replyPostUrl:"/sys/evaluation/sys_evaluation_main/sysEvaluationReply.do?method=save",_onReplyClick:function(i){var k=this,l=k.getParent();var j=[];var m={plugin:["face","dnyling","lingling"],limitNum:1000};h.mixin(m,i);d.popup(k.replyPostUrl,m,function(n){if(n.status==200){c.publish("/mui/list/toTop",this,{time:0});this.defer(function(){c.publish("/mui/list/onPull",b.byId("eval_scollView"))},100)}})}});return g})},"sys/evaluation/mobile/js/EvaluationItemListMixin":function(){define(["dojo/_base/declare","mui/list/_TemplateItemListMixin","mui/util",dojoConfig.baseUrl+"sys/evaluation/mobile/js/EvaluationItemMixin.js","sys/evaluation/mobile/js/EvaluationItemListReplyMixin","sys/evaluation/mobile/js/EvaluationAdditionListMixin","dojo/_base/array"],function(d,e,b,a,f,c,g){return d("sys.evaluation.EvaluationItemListMixin",[e,f,c],{buildRendering:function(){this.inherited(arguments);this.url=b.urlResolver(this.url,{fdModelId:this.fdModelId,fdModelName:this.fdModelName});this.subscribe("/mui/list/loaded","loadedHandle")},itemRenderer:a,ids:null,idList:[],loadedHandle:function(i){if(!i){return}var h=i.listDatas;this.buildIds(h);this.inherited(arguments)},buildIds:function(h){this.ids="";this.idList=[];g.forEach(h,function(j,i){var k=j.fdId;this.ids+=(i==0?k:";"+k);this.idList.push(k)},this)}})})}}});